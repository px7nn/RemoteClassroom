<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student — Remote Classroom</title>
  <style>
    :root{--bg:#0b1220;--card:#0f1724;--accent:#60a5fa;--muted:#9fb3c8}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui;background:linear-gradient(180deg,#071029,#0b1220);color:#e7f0fb}
    header{padding:14px 22px;display:flex;justify-content:space-between;align-items:center}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#6ee7b7,#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:800;color:#042027}

    .container{max-width:1100px;margin:20px auto;padding:18px;display:grid;grid-template-columns:1fr 360px;gap:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:16px;border-radius:12px}

    .btn{padding:10px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
    .btn.primary{background:var(--accent);color:#042027}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    video{width:100%;height:220px;background:#031021;border-radius:10px;object-fit:cover}
    .chat{height:220px;overflow:auto;padding:8px;border-radius:8px;background:#071226}
    .schedule table{width:100%;border-collapse:collapse}
    .schedule th,.schedule td{border:1px solid rgba(255,255,255,0.06);padding:8px;text-align:center}

    input,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.05);background:transparent;color:inherit}
    footer{padding:14px;text-align:center;color:var(--muted)}

    @media(max-width:960px){.container{grid-template-columns:1fr}.whiteboard{height:220px}video{height:220px}}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;gap:12px;align-items:center"><div class="logo">RC</div><div><strong>Remote Classroom</strong><div style="font-size:12px;color:var(--muted)">Student Portal</div></div></div>
    <div>
      <a href="index.html" style="color:var(--muted);text-decoration:none;margin-right:12px">Home</a>
      <a href="teacher.html" style="color:var(--muted);text-decoration:none">Teacher View</a>
    </div>
  </header>

  <main class="container">
    <div>
      <div class="card" style="text-align:center">
        <strong>Join Live Class</strong>
        <div style="margin-top:8px;color:var(--muted)">(Demo: teacher preview is local only; actual streaming requires WebRTC)</div>
        <button class="btn primary" id="joinBtn">Join</button>
        <video id="studentCam" autoplay playsinline></video>
      </div>

      <div class="card" style="margin-top:12px">
        <strong>Resources</strong>
        <ul id="resListS"></ul>
      </div>

      <div class="card" style="margin-top:12px">
        <strong>Quiz</strong>
        <div id="quizArea">No quiz available</div>
      </div>

    </div>

    <aside>
      <div class="card">
        <strong>Chat</strong>
        <div class="chat" id="chatBox"></div>
        <div style="display:flex;gap:8px;margin-top:8px"><input id="chatIn" placeholder="Type message"><button class="btn primary" id="sendC">Send</button></div>
      </div>

      <div class="card schedule" style="margin-top:12px">
        <strong>Weekly Schedule</strong>
        <table>
          <tr><th>Day</th><th>Time</th><th>Subject</th></tr>
          <tr><td>Monday</td><td>10:00 - 11:00</td><td>Mathematics</td></tr>
          <tr><td>Tuesday</td><td>11:30 - 12:30</td><td>Physics</td></tr>
          <tr><td>Wednesday</td><td>9:00 - 10:00</td><td>Computer Science</td></tr>
          <tr><td>Thursday</td><td>2:00 - 3:00</td><td>Chemistry</td></tr>
          <tr><td>Friday</td><td>1:00 - 2:00</td><td>English</td></tr>
        </table>
      </div>
    </aside>
  </main>

  <footer>Prototype — demo-ready. For live streaming across devices, integrate WebRTC & signaling.</footer>

  <script>
    // Student-side demo interactions
    document.getElementById('sendC').addEventListener('click', ()=>{
      const v = document.getElementById('chatIn').value.trim(); if(!v) return; const box = document.getElementById('chatBox'); const d = document.createElement('div'); d.textContent = v; d.style.padding='6px 8px'; d.style.margin='6px 0'; d.style.background='rgba(255,255,255,0.03)'; d.style.borderRadius='6px'; box.appendChild(d); document.getElementById('chatIn').value=''; box.scrollTop = box.scrollHeight;
    });

    // Join: local camera (student own webcam)
    document.getElementById('joinBtn').addEventListener('click', async ()=>{
      try{ const s = await navigator.mediaDevices.getUserMedia({video:true,audio:true}); document.getElementById('studentCam').srcObject = s; }
      catch(e){alert('Camera access denied')}
    });

    // Load quiz from localStorage if teacher published
    function loadQuiz(){ const q = localStorage.getItem('rc_quiz'); if(!q) return; const obj = JSON.parse(q); const el = document.getElementById('quizArea'); el.innerHTML = `<div style="font-weight:700">${obj.q}</div><div style="margin-top:8px">${obj.opts.map((o,i)=>`<button class='btn ghost' onclick="submitAns(${i})">${String.fromCharCode(65+i)}. ${o}</button>`).join('<br><br>')}</div>`; }
    function submitAns(i){ alert('Answer submitted: ' + String.fromCharCode(65+i)); }
    loadQuiz();

    // Load resources published by teacher (reads from localStorage resources array written by teacher page)
    function loadResources(){ const r = JSON.parse(localStorage.getItem('rc_resources')||'[]'); const ul = document.getElementById('resListS'); ul.innerHTML = r.map(rr=>`<li>${rr.name} <small style='color:#9fb3c8'>${rr.when}</small></li>`).join(''); }
    loadResources();

    // Periodically refresh quiz/resources (demo sync across tabs)
    setInterval(()=>{ loadQuiz(); loadResources(); },1500);
  </script>
</body>
</html>
